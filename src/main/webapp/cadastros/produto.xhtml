<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	template="/template.xhtml"
	xmlns:app="http://java.sun.com/jsf/composite/componentes" >

	<ui:define name="tituloPagina">#{label.nome_programa_produto}</ui:define>
	<ui:define name="nomePrograma"> #{label.nome_programa_produto}</ui:define>

	<ui:define name="head">
		<style type="text/css">
			.label {width: 20%;	padding: 2px;}
			
			.value {width: 80%;	padding: 2px;}
			
			.grid {	width: 70%;}
			
			.editarBotao {            
    			background: url('../resources/img/edit16x16.png') no-repeat !important;
    			background-color: #004080 !important; 
   				height: 22px;
    			width: 25px;
				margin-left: 18%;
			}

			.excluirBotao { 
			    background: url('../resources/img/delete16x16.png') no-repeat !important; 
			    background-color: #d9534f  !important; 
			    height: 22px;
			    width: 25px;
				margin-left: 18%;
			}
		</style>
	</ui:define>


	<ui:define name="content">
			
			<p:growl id="msgs" autoUpdate="true" showDetail="True" life="4000"/>
			<p:messages autoUpdate="true" closable="true">
				<p:effect type="puff" event="load" delay="9000" />
			</p:messages>
			
			
			<!-- ################### BOTÕES ############################## -->
			
			<app:barraBotoes bean="#{produtoBean}"/>
						
						
			<!-- ################## CONPONENTES EDIÇÃO ########################## -->				
			
			<p:panel id="panel" header="#{label.pnl_manut_produto}" rendered="#{!produtoBean.buscando}">
			
			  	<p:tabView id="tab" styleClass="ddd" style="border:none ;font-size: 13px !important;">
			
					<!--  Inicio da Tab Dados Gerais-->
				   	<p:tab title="#{label.dados_gerais}" id="tabDadosGerais">
						
						
					<div class="ui-g">
    					<div class="ui-g-12 ui-md-6 ui-lg-2">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.codigo}" for="id" />
								<p:inputMask value="#{produtoBean.entidade.codigo}" id="id"
									readonly="#{produtoBean.visualizando}" mask="99" style="width: 70%" 
									required="true" requiredMessage="Informe o Código do Produto!"/>
							</h:panelGrid>
						</div>    										
    					
    					<div class="ui-g-12 ui-md-6 ui-lg-3">
    						<h:panelGrid columns="1">
								<p:outputLabel value="#{label.data_cadastro}" for="dataCadastro" />
								<p:inputMask id="dataCadastro"  mask="99/99/9999" readonly="true"
									value="#{produtoBean.entidade.dataInsercao}"/>
							</h:panelGrid>
						</div>
						
						<div class="ui-g-12 ui-md-6 ui-lg-3">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.usuario}" for="usuario" />								
								<p:inputText value="#{produtoBean.entidade.usuario}" id="usuario" style="width: 80%" />								
							</h:panelGrid>
						</div>
						
						<div class="ui-g-12 ui-md-6 ui-lg-2">
							<h:panelGrid columns="1" style="width: 100%">
	        					<p:outputLabel for="situacao" value="Situação" />
	        					<p:selectOneRadio id="situacao" value="#{produtoBean.entidade.situacao}" style="width: 90%">
	            					<f:selectItem itemLabel="Normal" itemValue="true" />
	            					<f:selectItem itemLabel="#{label.inativo}" itemValue="false" />
	        					</p:selectOneRadio>
	    					</h:panelGrid>
    					</div>
						
					</div>
						
						
					<div class="ui-g">
    					<div class="ui-g-12 ui-md-6 ui-lg-5">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.nome}" for="nome" />
								<p:inputText value="#{produtoBean.entidade.nome}" id="nome" 
									readonly="#{produtoBean.visualizando}" style="width: 90%"/>								
							</h:panelGrid>
    						
						</div>
    					
    					<div class="ui-g-12 ui-md-6 ui-lg-3">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.codigo_barras}" for="cod_barras" />
								<p:inputText value="#{produtoBean.entidade.codigoBarras}" id="cod_barras" 
									readonly="#{produtoBean.visualizando}" style="width: 80%"/>								
							</h:panelGrid>
						</div>
    					
    					<div class="ui-g-12 ui-md-6 ui-lg-2">
    						<h:panelGrid columns="1" style="width: 100%;">
								<p:outputLabel value="#{label.peso_bruto}" for="peso_bruto" />
								<p:inputText value="#{produtoBean.entidade.pesoBruto}" id="peso_bruto" 
									readonly="#{produtoBean.visualizando}" style="width: 80%"/>
							</h:panelGrid>
						</div>
					</div>
						
						
					<div class="ui-g">
    					<div class="ui-g-12 ui-md-6 ui-lg-1">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.grupo}" for="grupo" />
								
								<p:inputText value="#{produtoBean.entidade.grupoProduto.codigoEstrutural}" id="grupo" style="width: 100%">
									<p:ajax event="change" update="grupoNome" listener="#{produtoBean.buscarGrupoProduto}"/>
								
								</p:inputText>
								
							</h:panelGrid>
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-4">
						
							<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.nome_grupo}" for="grupoNome" />
								
								<p:autoComplete id="grupoNome" value="#{produtoBean.entidade.grupoProduto}"
    								var="grupo" itemLabel="#{grupo.nome}" itemValue="#{grupo}" minQueryLength="4"
									forceSelection="true" size="47"
									completeMethod="#{produtoBean.completaGrupoProduto}">
									<p:watermark value="#{label.pesquise_pelo_nome}" for="grupoNome"/>
									<p:ajax event="itemSelect" update="grupo"/>
								</p:autoComplete>
							</h:panelGrid>
						</div>
    					
    					<div class="ui-g-12 ui-md-6 ui-lg-3">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.codigo_barras_ean14}" for="cod_barras_ean14" />
								<p:inputText value="#{produtoBean.entidade.codigoBarrasEan14}" id="cod_barras_ean14" 
									readonly="#{produtoBean.visualizando}" style="width: 80%"/>								
							</h:panelGrid>
						</div>
    					
    					<div class="ui-g-12 ui-md-6 ui-lg-2">
    						<h:panelGrid columns="1" style="width: 100%;">
								<p:outputLabel value="#{label.peso_liquido}" for="peso_liquido" />
								<p:inputText value="#{produtoBean.entidade.pesoLiquido}" id="peso_liquido" 
									readonly="#{produtoBean.visualizando}" style="width: 80%"/>
							</h:panelGrid>
						</div>
    					
					</div>
						
						
						
					<div class="ui-g">
    					
    					<div class="ui-g-12 ui-md-6 ui-lg-1">
    						<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.clas_fiscal}" for="clas_fiscal" />
								
								<p:inputText value="#{produtoBean.entidade.clasFiscal.codigo}" id="clas_fiscal" style="width: 100%" />
								
							</h:panelGrid>
						</div>
						
						<div class="ui-g-12 ui-md-6 ui-lg-4">						
							<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.clas_fiscal_nome}" for="clas_fiscal_nome" />
								<p:inputText value="#{produtoBean.entidade.clasFiscal.nome}" id="clas_fiscal_nome" style="width: 87%" />
							</h:panelGrid>
						</div>
						
						
						<div class="ui-g-12 ui-md-6 ui-lg-2">						
							<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.codigo_ncm}" for="cod_ncm" />
								<p:inputText value="#{produtoBean.entidade.codigoNcm}" id="cod_ncm" style="width: 87%" />
							</h:panelGrid>
						</div>
						
						
						<div class="ui-g-12 ui-md-6 ui-lg-2">						
							<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.codigo_tipi}" for="cod_tipi" />
								<p:inputText value="#{produtoBean.entidade.codigoNcmExtipi}" id="cod_tipi" style="width: 87%" />
							</h:panelGrid>
						</div>
						
						
						<div class="ui-g-12 ui-md-6 ui-lg-2">						
							<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.codigo_strib}" for="cod_strib" />
								<p:inputText value="#{produtoBean.entidade.codigoCest}" id="cod_strib" style="width: 87%" />
							</h:panelGrid>
						</div>
						
						
					</div>				
					
					
					<div class="ui-g">
    					<div class="ui-g-12 ui-md-6 ui-lg-5">
    						<h:panelGrid columns="1" style="width: 100%">
								<h:outputLabel value="#{label.origem_mercadoria}" for="origem" />
								<p:selectOneMenu value="#{produtoBean.entidade.unidade}" 
									id="origem" style="width: 86%"
									required="true" requiredMessage="Informe a Unidade!">
									
									<f:selectItem itemLabel="Selecione" />
									<f:selectItems value="#{produtoBean.unidades}" var="a"
										itemValue="#{a}" itemLabel="#{a.nome}"/>
								</p:selectOneMenu>	
							</h:panelGrid>
						</div>
						
						<div class="ui-g-12 ui-md-6 ui-lg-3">
    						<h:panelGrid columns="1" style="width: 100%">
								<h:outputLabel value="#{label.unidade}" for="unidade" />
								<p:selectOneMenu value="#{produtoBean.entidade.unidade}" 
									id="unidade" style="width: 74%"
									required="true" requiredMessage="Informe a Unidade!">
									
									<f:selectItem itemLabel="Selecione" />
									<f:selectItems value="#{produtoBean.unidades}" var="a"
										itemValue="#{a}" itemLabel="#{a.nome}"/>
								</p:selectOneMenu>	
							</h:panelGrid>
						</div>
						
						<div class="ui-g-12 ui-md-6 ui-lg-2">						
							<h:panelGrid columns="1" style="width: 100%">
								<p:outputLabel value="#{label.referencia_fabrica}" for="ref_fabrica" />
								<p:inputText value="#{produtoBean.entidade.refFabrica}" id="ref_fabrica" style="width: 87%" />
							</h:panelGrid>
						</div>
					</div>
					
					<div class="ui-g">    					
    					<div class="ui-g-12 ui-md-6 ui-lg-5">
    					<h:panelGrid columns="1" style="width: 100%">
    						<p:outputLabel value="Observações" for="obs" />
							<p:inputTextarea value="#{empresaBean.entidade.obs}" id="obs"
								style="width: 90%" rows="5" cols="30" counter="display"
								maxlength="255" counterTemplate="{0} Caracteres Restantes"
								autoResize="false" readonly="!#{empresaBean.visualizando}" />
							<h:outputText id="display" />
						</h:panelGrid>
						</div>
						
						<div class="ui-g-12 ui-md-6 ui-lg-2">
    					<h:panelGrid columns="2" style="width: 100%">
    						
							<p:selectBooleanCheckbox value="#{produtoBean.entidade.ncmUsaMvaAjustado}" id="mva"
								style="width: 80%" />
							<p:outputLabel value="#{label.usar_mva_ajustado}" for="mva" />
						</h:panelGrid>
						</div>
					</div>	
					
															
				   	</p:tab>
				   			
				   
				   	<!--  Inicio da Industria Geral-->
				   <p:tab title="#{label.industria_geral}" id="tabIndGeral">
						
				   </p:tab>
				   
				   <!--  Inicio da Industria Textil-->
				   <p:tab title="#{label.industria_textil}" id="tabIndTextil">
						
				   </p:tab>						
			
			  	</p:tabView>
			</p:panel>
				
			
			
			<!-- ################## TABELA ########################## -->			
						
			<p:panel id="tabela" header="#{label.pnl_consulta_produto}" rendered="#{produtoBean.buscando}" 
				 style="padding: 0" styleClass="menuSemBorda">
				 
				 
				<p:dataTable value="#{produtoBean.entidades}" var="produto" id="tbl" 
					selection="#{produtoBean.entidade}" selectionMode="single"
					rowKey="#{produto.id}" paginator="true" reflow="true"
					rowsPerPageTemplate="10,25,50" paginatorPosition="bottom"
					emptyMessage="#{label.msg_tabela_vazia}"
					paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
					style="margin: -5px -11px;">				
					
					<f:facet name="{Exporters}" >											
						<h:commandLink>
			                <p:graphicImage library="images" name="excel.png" width="24" style="float:right"/>
			                <p:dataExporter type="xls" target="tbl" fileName="cars" />
			            </h:commandLink>
			 
			            <h:commandLink>
			                <p:graphicImage library="images" name="pdf.png" width="24" style="float:right"/>
			                <p:dataExporter type="pdf" target="tbl" fileName="cars"/>
			            </h:commandLink>
					</f:facet>	


					<p:ajax event="rowDblselect" listener="#{produtoBean.onRowDblClckSelect}"
						global="false" update="@form"/>

					<p:ajax event="rowSelect" listener="#{produtoBean.onRowSelect}" />

					<p:column headerText="#{label.ativo}" style="width: 7%; ">
						<p:graphicImage value="/resources/images/checked.png"
										rendered="#{produto.situacao}" />
						<p:graphicImage value="/resources/images/unchecked.png"
										rendered="#{ not produto.situacao}" />
					</p:column>

					<p:column headerText="#{label.codigo}" style="width: 7%;font-size:13px;">
						<h:outputText value="#{produto.codigo}" />
					</p:column>


					<p:column headerText="#{label.nome}" style="width: 30%;font-size:13px;">
						<h:outputText value="#{produto.nome}" />
					</p:column>


					<p:column headerText="#{label.grupo}" style="width:20%;font-size:13px;">
						<h:outputText value="#{produto.grupoProduto.codigoEstrutural}" />
					</p:column>
					
					
					<p:column headerText="#{label.nome_grupo}" style="width:25%;font-size:13px;">
						<h:outputText value="#{produto.grupoProduto.nome}" />
					</p:column>
					
					
					<p:column headerText="#{label.acoes}" style="width:10%;font-size:13px;" exportable="false">						
						<p:commandButton actionListener="#{produtoBean.editar(empresa)}" 
							styleClass="editarBotao" value="" update="@form"/>
							
						<p:commandButton actionListener="#{produtoBean.excluir(empresa)}" 
							styleClass="excluirBotao" value=""	
							update="@form">
							
							<p:confirm header="Confirmação" message="Deseja Excluir este Produto?" icon="ui-icon-alert"/>
						</p:commandButton>
					</p:column>					

				</p:dataTable>
						
			</p:panel>
	</ui:define>

</ui:composition>